<!DOCTYPE html>
<html lang="en" itemscope itemtype="https://schema.org/WebPage">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Cobalt / Starboard Module Reference: socket_waiter.h</title>

            <!-- Webfont -->
    
    <link href='https://fonts.googleapis.com/css?family=Kavoon|Material+Icons' rel='stylesheet' type='text/css'>
    


    <!-- Material Design Lite -->
    <link href="/assets/material-design-lite/material.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <!-- Bootstrap -->
    <link href="/assets/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Styles -->
    <link rel="stylesheet" type="text/css" href="/css/site.css" />

    <!-- Font Awesome icons -->
    <link href="/assets/font-awesome-4.4.0/css/font-awesome.min.css"
          rel="stylesheet"
          type="text/css">
    
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="/assets/bootstrap/js/bootstrap.min.js"></script>

    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>

    <!-- material design lite -->
    <script src="/assets/material-design-lite/material.min.js"></script>
    
    <!-- Include the common site javascript -->
    <script src="/js/common.js" type="text/javascript" charset="utf-8"></script>


    <!-- metadata -->
    <meta name="og:title" content="Cobalt / Starboard Module Reference: socket_waiter.h"/>
    <meta name="og:image" content="/images/cobalt-logo.png"/>
    <meta name="og:description" content="A high-performance, small-footprint platform that implements a subset of HTML5/CSS/JS to run applications, including the YouTube TV app."/>
  </head>
  <body class="docs" id="top_of_page">

    <span id="toc-depth" data-toc-depth="h2,h3"></span>



    <nav id="common-nav" class="navbar navbar-fixed-top inverse">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
      <a class="navbar-brand" href="/">
        <img class="logo" src="/images/cobalt-logo.png" alt="Cobalt">
      </a>
      
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right" id="standard-menu-links">
        
  
    
  
  
    
      <li><a href="/starboard/porting.html">Porters</a></li>
    
  

  
    
  
  
    
      <li><a href="/development/setup-linux.html">Developers</a></li>
    
  

  
    
  
  
    
      <li><a href="/contributors/index.html">Contributors</a></li>
    
  

  
    
  
  
    
      
        <li><a href="https://cobalt.googlesource.com/cobalt">Code Repo</a></li>
      
    
  


      </ul>
      <ul class="nav nav-stacked mobile-left-nav-menu" id="collapsed-left-menu">
        
  
<li class="expand-container" data-expander-target-search="relative">
    
      
      
<h4 class="no-submenu no-top-margin"><a href="/overview.html">Overview</a></h4>
      
    
</li>
  

  
<li class="expand-container" data-expander-target-search="relative">
    
      
        
          <h4 class="submenu">Porters</h4>
        
      
  <ul class="content">
      
        
    <li><b>Guides</b>
          
      <ul>
            
              
        <li><a href="/starboard/porting.html">Port Cobalt to your platform</a></li>
              
            
              
        <li><a href="/starboard/testing.html">Testing with NPLB</a></li>
              
            
      </ul>
    </li>
          
        
      
        
    <li><b>Reference</b>
          
      <ul>
            
              
        <li><a href="/reference/starboard/configuration-public.html">configuration_public.h</a></li>
              
            
              
        <li><a href="/reference/starboard/gyp-configuration.html">gyp_configuration.gypi</a></li>
              
            
              
                <li><b>Starboard modules</b>
                
          <ul>
                  
                    
                      <li><a href="/reference/starboard/modules/accessibility.html">accessibility.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/atomic.html">atomic.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/audio_sink.html">audio_sink.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/blitter.html">blitter.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/byte_swap.html">byte_swap.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/character.html">character.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/condition_variable.html">condition_variable.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/configuration.html">configuration.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/cryptography.html">cryptography.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/decode_target.html">decode_target.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/directory.html">directory.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/double.html">double.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/drm.html">drm.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/event.html">event.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/export.html">export.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/file.html">file.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/image.html">image.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/input.html">input.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/key.html">key.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/log.html">log.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/media.html">media.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/memory.html">memory.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/memory_reporter.html">memory_reporter.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/microphone.html">microphone.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/mutex.html">mutex.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/once.html">once.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/player.html">player.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/queue.html">queue.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/socket.html">socket.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/socket_waiter.html">socket_waiter.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/speech_recognizer.html">speech_recognizer.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/speech_synthesis.html">speech_synthesis.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/spin_lock.html">spin_lock.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/storage.html">storage.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/string.html">string.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/system.html">system.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/thread.html">thread.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/thread_types.html">thread_types.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/time.html">time.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/time_zone.html">time_zone.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/types.html">types.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/user.html">user.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/window.html">window.h</a></li>
                    
                  
          </ul>
                
              
            
      </ul>
    </li>
          
        
      
  </ul>
    
</li>
  

  
<li class="expand-container" data-expander-target-search="relative">
    
      
        
          <h4 class="submenu">Developers</h4>
        
      
  <ul class="content">
      
        
    <li><b>Guides</b>
          
      <ul>
            
              
        <li><a href="/development/setup-linux.html">Setup - Linux</a></li>
              
            
              
        <li><a href="/development/setup-raspi.html">Setup - RasPi</a></li>
              
            
      </ul>
    </li>
          
        
      
        
    <li><b>Reference</b>
          
      <ul>
            
              
        <li><a href="/development/reference/supported-features.html">Cobalt support</a></li>
              
            
      </ul>
    </li>
          
        
      
  </ul>
    
</li>
  

  
<li class="expand-container" data-expander-target-search="relative">
    
      
      
<h4 class="no-submenu"><a href="/contributors/index.html">Contributors</a></h4>
      
    
</li>
  

  
<li class="expand-container" data-expander-target-search="relative">
    
      
      
<h4 class="no-submenu"><a href="/communication.html">Communication</a></h4>
      
    
</li>
  


        <li><a href="https://cobalt.googlesource.com/cobalt" id="collapsed-left-menu-repo-link"><i class="fa fa-github"></i> GitHub</a></li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container -->
</nav>


    
<div id="masthead">
  <div class="container">
    <div class="row">
      <div class="col-md-11">
        <h1>Starboard Module Reference: socket_waiter.h</h1>
      </div>
    </div>
  </div>
</div>


<div class="container">
    <div class="row scroll-margin" id="toc-content-row">
    <div class="col-md-2" id="leftCol">
      <ul class="nav nav-stacked mobile-left-nav-menu" id="sidebar">
        
  
<li class="expand-container" data-expander-target-search="relative">
    
      
      
<h4 class="no-submenu no-top-margin"><a href="/overview.html">Overview</a></h4>
      
    
</li>
  

  
<li class="expand-container" data-expander-target-search="relative">
    
      
        
          <h4 class="submenu">Porters</h4>
        
      
  <ul class="content">
      
        
    <li><b>Guides</b>
          
      <ul>
            
              
        <li><a href="/starboard/porting.html">Port Cobalt to your platform</a></li>
              
            
              
        <li><a href="/starboard/testing.html">Testing with NPLB</a></li>
              
            
      </ul>
    </li>
          
        
      
        
    <li><b>Reference</b>
          
      <ul>
            
              
        <li><a href="/reference/starboard/configuration-public.html">configuration_public.h</a></li>
              
            
              
        <li><a href="/reference/starboard/gyp-configuration.html">gyp_configuration.gypi</a></li>
              
            
              
                <li><b>Starboard modules</b>
                
          <ul>
                  
                    
                      <li><a href="/reference/starboard/modules/accessibility.html">accessibility.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/atomic.html">atomic.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/audio_sink.html">audio_sink.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/blitter.html">blitter.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/byte_swap.html">byte_swap.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/character.html">character.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/condition_variable.html">condition_variable.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/configuration.html">configuration.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/cryptography.html">cryptography.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/decode_target.html">decode_target.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/directory.html">directory.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/double.html">double.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/drm.html">drm.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/event.html">event.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/export.html">export.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/file.html">file.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/image.html">image.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/input.html">input.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/key.html">key.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/log.html">log.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/media.html">media.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/memory.html">memory.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/memory_reporter.html">memory_reporter.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/microphone.html">microphone.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/mutex.html">mutex.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/once.html">once.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/player.html">player.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/queue.html">queue.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/socket.html">socket.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/socket_waiter.html">socket_waiter.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/speech_recognizer.html">speech_recognizer.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/speech_synthesis.html">speech_synthesis.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/spin_lock.html">spin_lock.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/storage.html">storage.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/string.html">string.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/system.html">system.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/thread.html">thread.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/thread_types.html">thread_types.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/time.html">time.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/time_zone.html">time_zone.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/types.html">types.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/user.html">user.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/window.html">window.h</a></li>
                    
                  
          </ul>
                
              
            
      </ul>
    </li>
          
        
      
  </ul>
    
</li>
  

  
<li class="expand-container" data-expander-target-search="relative">
    
      
        
          <h4 class="submenu">Developers</h4>
        
      
  <ul class="content">
      
        
    <li><b>Guides</b>
          
      <ul>
            
              
        <li><a href="/development/setup-linux.html">Setup - Linux</a></li>
              
            
              
        <li><a href="/development/setup-raspi.html">Setup - RasPi</a></li>
              
            
      </ul>
    </li>
          
        
      
        
    <li><b>Reference</b>
          
      <ul>
            
              
        <li><a href="/development/reference/supported-features.html">Cobalt support</a></li>
              
            
      </ul>
    </li>
          
        
      
  </ul>
    
</li>
  

  
<li class="expand-container" data-expander-target-search="relative">
    
      
      
<h4 class="no-submenu"><a href="/contributors/index.html">Contributors</a></h4>
      
    
</li>
  

  
<li class="expand-container" data-expander-target-search="relative">
    
      
      
<h4 class="no-submenu"><a href="/communication.html">Communication</a></h4>
      
    
</li>
  


      </ul>
    </div>
    <div class="col-md-3 show-share-buttons-bottom" id="rightCol">
      <div class="nav nav-stacked" id="tocSidebar">
        
        <div id="toc"></div>
        
          <div id="rightCol-share-buttons" class="share-buttons-bottom">
            

  


          </div>
        
      </div>
    </div>
    <div class="col-md-7" id="centerCol">
      <div id="content">
        <p>Allows a thread to wait on many sockets at once. The standard usage pattern
would be for a single I/O thread to:</p>

<ol>
<li><p>Create its own SbSocketWaiter.</p></li>
<li><p>Wait on the SbSocketWaiter, indefinitely if no scheduled tasks, or timed if
there are scheduled future tasks.</p></li>
<li><p>While waiting, the SbSocketWaiter will call back to service ready SbSockets.</p></li>
<li><p>Wake up, if signaled to do so.</p></li>
<li><p>If ready to exit, go to 7.</p></li>
<li><p>Add and remove SbSockets to and from the SbSocketWaiter, and go to 2.</p></li>
<li><p>Destroy its SbSocketWaiter and exit.</p></li>
</ol>

<p>If another thread wants to queue immediate or schedule future work on the I/O
thread, it needs to call SbSocketWaiterWakeUp() on the SbSocketWaiter after
queuing the work item, or the SbSocketWaiter is not otherwise guaranteed to wake
up.</p>

<h2 id="macros">Macros</h2>

<h3 id="ksbsocketwaiterinvalid">kSbSocketWaiterInvalid</h3>

<p>Well-defined value for an invalid socket watcher handle.</p>

<h2 id="enums">Enums</h2>

<h3 id="sbsocketwaiterinterest">SbSocketWaiterInterest</h3>

<p>All the interests that a socket may register for on a waiter.</p>

<h4 id="values">Values</h4>

<ul>
<li><p><code class="prettyprint">kSbSocketWaiterInterestNone</code></p>

<p>No interests whatsoever.</p></li>
<li><p><code class="prettyprint">kSbSocketWaiterInterestRead</code></p>

<p>An interest in or readiness to read from a socket without blocking.</p></li>
<li><p><code class="prettyprint">kSbSocketWaiterInterestWrite</code></p>

<p>An interest in or readiness to write to a socket without blocking.</p></li>
</ul>

<h3 id="sbsocketwaiterresult">SbSocketWaiterResult</h3>

<p>Possible reasons why a call to SbSocketWaiterWaitTimed returned.</p>

<h4 id="values">Values</h4>

<ul>
<li><p><code class="prettyprint">kSbSocketWaiterResultInvalid</code></p>

<p>The wait didn&#39;t block because the waiter was invalid.</p></li>
<li><p><code class="prettyprint">kSbSocketWaiterResultTimedOut</code></p>

<p>The wait stopped because the timeout expired.</p></li>
<li><p><code class="prettyprint">kSbSocketWaiterResultWokenUp</code></p>

<p>The wait stopped because a call to SbSocketWaiterWakeUp was consumed.</p></li>
</ul>

<h2 id="typedefs">Typedefs</h2>

<h3 id="sbsocketwaiter">SbSocketWaiter</h3>

<p>A handle to a socket waiter.</p>

<h4 id="definition">Definition</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">typedef SbSocketWaiterPrivate* SbSocketWaiter
</code></pre></div>
<h3 id="sbsocketwaitercallback">SbSocketWaiterCallback</h3>

<p>Function pointer for socket waiter callbacks.</p>

<h4 id="definition">Definition</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">typedef void(* SbSocketWaiterCallback) (SbSocketWaiter waiter, SbSocket socket, void *context, int ready_interests)
</code></pre></div>
<h2 id="functions">Functions</h2>

<h3 id="sbsocketwaiteradd">SbSocketWaiterAdd</h3>

<p>Adds a new socket to be waited on by the <code class="prettyprint">waiter</code> with a bitfield of
<code class="prettyprint">interests</code>. This function should only be called on the thread that waits on
this waiter.</p>

<p>If <code class="prettyprint">socket</code> is already registered with this or another waiter, the function does
nothing and returns <code class="prettyprint">false</code>. The client must remove the socket and then add it
back with the new <code class="prettyprint">interests</code>.</p>

<p>If <code class="prettyprint">socket</code> is already ready for one or more of the operations set in the
<code class="prettyprint">interests</code> mask, then the callback will be called on the next call to either
SbSocketWaiterWait() or SbSocketWaiterWaitTimed().</p>

<p><code class="prettyprint">waiter</code>: An SbSocketWaiter that waits on the socket for the specified set of
operations (<code class="prettyprint">interests</code>). <code class="prettyprint">socket</code>: The SbSocket on which the waiter waits.
<code class="prettyprint">context</code>: <code class="prettyprint">callback</code>: The function that is called when the event fires. The
<code class="prettyprint">waiter</code>, <code class="prettyprint">socket</code>, <code class="prettyprint">context</code> are all passed to the callback, along with a
bitfield of <code class="prettyprint">interests</code> that the socket is actually ready for. <code class="prettyprint">interests</code>: A
bitfield that identifies operations for which the socket is waiting.
<code class="prettyprint">persistent</code>: Identifies the procedure that will be followed for removing the
socket:</p>

<ul>
<li><p>If <code class="prettyprint">persistent</code> is <code class="prettyprint">true</code>, then <code class="prettyprint">socket</code> stays registered with <code class="prettyprint">waiter</code>
until SbSocketWaiterRemove() is called with <code class="prettyprint">waiter</code> and <code class="prettyprint">socket</code>.</p></li>
<li><p>If <code class="prettyprint">persistent</code> is <code class="prettyprint">false</code>, then <code class="prettyprint">socket</code> is removed after the next call to
<code class="prettyprint">callback</code>, even if not all registered <code class="prettyprint">interests</code> became ready.</p></li>
</ul>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">bool SbSocketWaiterAdd(SbSocketWaiter waiter, SbSocket socket, void *context, SbSocketWaiterCallback callback, int interests, bool persistent)
</code></pre></div>
<h3 id="sbsocketwaitercreate">SbSocketWaiterCreate</h3>

<p>The results of two threads waiting on the same waiter is undefined and will not
work. Except for the SbSocketWaiterWakeUp() function, SbSocketWaiters are not
thread-safe and don&#39;t expect to be modified concurrently.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">SbSocketWaiter SbSocketWaiterCreate()
</code></pre></div>
<h3 id="sbsocketwaiterdestroy">SbSocketWaiterDestroy</h3>

<p>Destroys <code class="prettyprint">waiter</code> and removes all sockets still registered by way of
SbSocketWaiterAdd. This function may be called on any thread as long as there is
no risk of concurrent access to the waiter.</p>

<p><code class="prettyprint">waiter</code>: The SbSocketWaiter to be destroyed.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">bool SbSocketWaiterDestroy(SbSocketWaiter waiter)
</code></pre></div>
<h3 id="sbsocketwaiterisvalid">SbSocketWaiterIsValid</h3>

<p>Returns whether the given socket handle is valid.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">static bool SbSocketWaiterIsValid(SbSocketWaiter watcher)
</code></pre></div>
<h3 id="sbsocketwaiterremove">SbSocketWaiterRemove</h3>

<p>Removes a socket, previously added with SbSocketWaiterAdd(), from a waiter. This
function should only be called on the thread that waits on this waiter.</p>

<p>The return value indicates whether the waiter still waits on the socket. If
<code class="prettyprint">socket</code> wasn&#39;t registered with <code class="prettyprint">waiter</code>, then the function is a no-op and
returns <code class="prettyprint">true</code>.</p>

<p><code class="prettyprint">waiter</code>: The waiter from which the socket is removed. <code class="prettyprint">socket</code>: The socket to
remove from the waiter.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">bool SbSocketWaiterRemove(SbSocketWaiter waiter, SbSocket socket)
</code></pre></div>
<h3 id="sbsocketwaiterwait">SbSocketWaiterWait</h3>

<p>Waits on all registered sockets, calling the registered callbacks if and when
the corresponding sockets become ready for an interested operation. This version
exits only after SbSocketWaiterWakeUp() is called. This function should only be
called on the thread that waits on this waiter.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void SbSocketWaiterWait(SbSocketWaiter waiter)
</code></pre></div>
<h3 id="sbsocketwaiterwaittimed">SbSocketWaiterWaitTimed</h3>

<p>Behaves similarly to SbSocketWaiterWait(), but this function also causes
<code class="prettyprint">waiter</code> to exit on its own after at least <code class="prettyprint">duration</code> has passed if
SbSocketWaiterWakeUp() it not called by that time.</p>

<p>The return value indicates the reason that the socket waiter exited. This
function should only be called on the thread that waits on this waiter.</p>

<p><code class="prettyprint">duration</code>: The minimum amount of time after which the socket waiter should exit
if it is not woken up before then. As with SbThreadSleep() (see thread.h), this
function may wait longer than <code class="prettyprint">duration</code>, such as if the timeout expires while a
callback is being fired.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">SbSocketWaiterResult SbSocketWaiterWaitTimed(SbSocketWaiter waiter, SbTime duration)
</code></pre></div>
<h3 id="sbsocketwaiterwakeup">SbSocketWaiterWakeUp</h3>

<p>Wakes up <code class="prettyprint">waiter</code> once. This is the only thread-safe waiter function. It can can
be called from a SbSocketWaiterCallback to wake up its own waiter, and it can
also be called from another thread at any time. In either case, the waiter will
exit the next wait gracefully, first completing any in-progress callback.</p>

<p>Each time this function is called, it causes the waiter to wake up once,
regardless of whether the waiter is currently waiting. If the waiter is not
waiting, the function takes effect immediately the next time the waiter waits.
The number of wake-ups accumulates, and the queue is only consumed as the waiter
waits and then is subsequently woken up again. For example, if you call this
function 7 times, then SbSocketWaiterWait() and WaitTimed() will not block the
next 7 times they are called.</p>

<p><code class="prettyprint">waiter</code>: The socket waiter to be woken up.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void SbSocketWaiterWakeUp(SbSocketWaiter waiter)
</code></pre></div>
        
          
            
          
        
      </div>
    </div>
  </div>

</div>


    
      <footer>
<div class="container">
    <div class="row">
      
        <div class="col-md-5 column-left">
          
          
            
              
  
    <span class="copyright-text">© Google 2019</span>
  


            
            
            
            
            
          
        </div>
      
        <div class="col-md-2 column-middle">
          
          
            
            
            
            
              
  <img class="footer-logo" src="/images/cobalt-logo.png" alt="Cobalt"/>


            
            
          
        </div>
      
<!--
          
          <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-share-button" data-href="/reference/starboard/modules/6/socket_waiter.html" data-layout=""></div>
&nbsp;
          <a href="https://twitter.com/" class="twitter-follow-button" data-show-screen-name="false" data-show-count="false" data-size=""></a>

<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>


-->
    </div>
</div>
</footer>

    

    <!-- TODO: Make sure no badness from moving common.js to styles.liquid -->

    
  </body>
</html>
