<!DOCTYPE html>
<html lang="en" itemscope itemtype="https://schema.org/WebPage">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Cobalt / Starboard Module Reference: player.h</title>

            <!-- Webfont -->
    
    <link href='https://fonts.googleapis.com/css?family=Kavoon|Material+Icons' rel='stylesheet' type='text/css'>
    


    <!-- Material Design Lite -->
    <link href="/assets/material-design-lite/material.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <!-- Bootstrap -->
    <link href="/assets/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Styles -->
    <link rel="stylesheet" type="text/css" href="/css/site.css" />

    <!-- Font Awesome icons -->
    <link href="/assets/font-awesome-4.4.0/css/font-awesome.min.css"
          rel="stylesheet"
          type="text/css">
    
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="/assets/bootstrap/js/bootstrap.min.js"></script>

    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>

    <!-- material design lite -->
    <script src="/assets/material-design-lite/material.min.js"></script>
    
    <!-- Include the common site javascript -->
    <script src="/js/common.js" type="text/javascript" charset="utf-8"></script>


    <!-- metadata -->
    <meta name="og:title" content="Cobalt / Starboard Module Reference: player.h"/>
    <meta name="og:image" content="/images/cobalt-logo.png"/>
    <meta name="og:description" content="A high-performance, small-footprint platform that implements a subset of HTML5/CSS/JS to run applications, including the YouTube TV app."/>
  </head>
  <body class="docs" id="top_of_page">

    <span id="toc-depth" data-toc-depth="h2,h3"></span>



    <nav id="common-nav" class="navbar navbar-fixed-top inverse">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
      <a class="navbar-brand" href="/">
        <img class="logo" src="/images/cobalt-logo.png" alt="Cobalt">
      </a>
      
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right" id="standard-menu-links">
        
  
    
  
  
    
      <li><a href="/starboard/porting.html">Porters</a></li>
    
  

  
    
  
  
    
      <li><a href="/development/setup-linux.html">Developers</a></li>
    
  

  
    
  
  
    
      <li><a href="/contributors/index.html">Contributors</a></li>
    
  

  
    
  
  
    
      
        <li><a href="https://cobalt.googlesource.com/cobalt">Code Repo</a></li>
      
    
  


      </ul>
      <ul class="nav nav-stacked mobile-left-nav-menu" id="collapsed-left-menu">
        
  
<li class="expand-container" data-expander-target-search="relative">
    
      
      
<h4 class="no-submenu no-top-margin"><a href="/overview.html">Overview</a></h4>
      
    
</li>
  

  
<li class="expand-container" data-expander-target-search="relative">
    
      
        
          <h4 class="submenu">Porters</h4>
        
      
  <ul class="content">
      
        
    <li><b>Guides</b>
          
      <ul>
            
              
        <li><a href="/starboard/porting.html">Port Cobalt to your platform</a></li>
              
            
              
        <li><a href="/starboard/testing.html">Testing with NPLB</a></li>
              
            
      </ul>
    </li>
          
        
      
        
    <li><b>Reference</b>
          
      <ul>
            
              
        <li><a href="/reference/starboard/configuration-public.html">configuration_public.h</a></li>
              
            
              
        <li><a href="/reference/starboard/gyp-configuration.html">gyp_configuration.gypi</a></li>
              
            
              
                <li><b>Starboard modules</b>
                
          <ul>
                  
                    
                      <li><a href="/reference/starboard/modules/accessibility.html">accessibility.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/atomic.html">atomic.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/audio_sink.html">audio_sink.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/blitter.html">blitter.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/byte_swap.html">byte_swap.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/character.html">character.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/condition_variable.html">condition_variable.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/configuration.html">configuration.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/cryptography.html">cryptography.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/decode_target.html">decode_target.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/directory.html">directory.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/double.html">double.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/drm.html">drm.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/event.html">event.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/export.html">export.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/file.html">file.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/image.html">image.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/input.html">input.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/key.html">key.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/log.html">log.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/media.html">media.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/memory.html">memory.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/memory_reporter.html">memory_reporter.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/microphone.html">microphone.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/mutex.html">mutex.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/once.html">once.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/player.html">player.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/queue.html">queue.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/socket.html">socket.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/socket_waiter.html">socket_waiter.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/speech_recognizer.html">speech_recognizer.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/speech_synthesis.html">speech_synthesis.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/spin_lock.html">spin_lock.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/storage.html">storage.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/string.html">string.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/system.html">system.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/thread.html">thread.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/thread_types.html">thread_types.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/time.html">time.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/time_zone.html">time_zone.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/types.html">types.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/user.html">user.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/window.html">window.h</a></li>
                    
                  
          </ul>
                
              
            
      </ul>
    </li>
          
        
      
  </ul>
    
</li>
  

  
<li class="expand-container" data-expander-target-search="relative">
    
      
        
          <h4 class="submenu">Developers</h4>
        
      
  <ul class="content">
      
        
    <li><b>Guides</b>
          
      <ul>
            
              
        <li><a href="/development/setup-linux.html">Setup - Linux</a></li>
              
            
              
        <li><a href="/development/setup-raspi.html">Setup - RasPi</a></li>
              
            
      </ul>
    </li>
          
        
      
        
    <li><b>Reference</b>
          
      <ul>
            
              
        <li><a href="/development/reference/supported-features.html">Cobalt support</a></li>
              
            
      </ul>
    </li>
          
        
      
  </ul>
    
</li>
  

  
<li class="expand-container" data-expander-target-search="relative">
    
      
      
<h4 class="no-submenu"><a href="/contributors/index.html">Contributors</a></h4>
      
    
</li>
  

  
<li class="expand-container" data-expander-target-search="relative">
    
      
      
<h4 class="no-submenu"><a href="/communication.html">Communication</a></h4>
      
    
</li>
  


        <li><a href="https://cobalt.googlesource.com/cobalt" id="collapsed-left-menu-repo-link"><i class="fa fa-github"></i> GitHub</a></li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container -->
</nav>


    
<div id="masthead">
  <div class="container">
    <div class="row">
      <div class="col-md-11">
        <h1>Starboard Module Reference: player.h</h1>
      </div>
    </div>
  </div>
</div>


<div class="container">
    <div class="row scroll-margin" id="toc-content-row">
    <div class="col-md-2" id="leftCol">
      <ul class="nav nav-stacked mobile-left-nav-menu" id="sidebar">
        
  
<li class="expand-container" data-expander-target-search="relative">
    
      
      
<h4 class="no-submenu no-top-margin"><a href="/overview.html">Overview</a></h4>
      
    
</li>
  

  
<li class="expand-container" data-expander-target-search="relative">
    
      
        
          <h4 class="submenu">Porters</h4>
        
      
  <ul class="content">
      
        
    <li><b>Guides</b>
          
      <ul>
            
              
        <li><a href="/starboard/porting.html">Port Cobalt to your platform</a></li>
              
            
              
        <li><a href="/starboard/testing.html">Testing with NPLB</a></li>
              
            
      </ul>
    </li>
          
        
      
        
    <li><b>Reference</b>
          
      <ul>
            
              
        <li><a href="/reference/starboard/configuration-public.html">configuration_public.h</a></li>
              
            
              
        <li><a href="/reference/starboard/gyp-configuration.html">gyp_configuration.gypi</a></li>
              
            
              
                <li><b>Starboard modules</b>
                
          <ul>
                  
                    
                      <li><a href="/reference/starboard/modules/accessibility.html">accessibility.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/atomic.html">atomic.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/audio_sink.html">audio_sink.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/blitter.html">blitter.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/byte_swap.html">byte_swap.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/character.html">character.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/condition_variable.html">condition_variable.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/configuration.html">configuration.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/cryptography.html">cryptography.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/decode_target.html">decode_target.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/directory.html">directory.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/double.html">double.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/drm.html">drm.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/event.html">event.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/export.html">export.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/file.html">file.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/image.html">image.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/input.html">input.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/key.html">key.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/log.html">log.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/media.html">media.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/memory.html">memory.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/memory_reporter.html">memory_reporter.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/microphone.html">microphone.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/mutex.html">mutex.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/once.html">once.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/player.html">player.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/queue.html">queue.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/socket.html">socket.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/socket_waiter.html">socket_waiter.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/speech_recognizer.html">speech_recognizer.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/speech_synthesis.html">speech_synthesis.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/spin_lock.html">spin_lock.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/storage.html">storage.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/string.html">string.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/system.html">system.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/thread.html">thread.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/thread_types.html">thread_types.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/time.html">time.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/time_zone.html">time_zone.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/types.html">types.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/user.html">user.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/window.html">window.h</a></li>
                    
                  
          </ul>
                
              
            
      </ul>
    </li>
          
        
      
  </ul>
    
</li>
  

  
<li class="expand-container" data-expander-target-search="relative">
    
      
        
          <h4 class="submenu">Developers</h4>
        
      
  <ul class="content">
      
        
    <li><b>Guides</b>
          
      <ul>
            
              
        <li><a href="/development/setup-linux.html">Setup - Linux</a></li>
              
            
              
        <li><a href="/development/setup-raspi.html">Setup - RasPi</a></li>
              
            
      </ul>
    </li>
          
        
      
        
    <li><b>Reference</b>
          
      <ul>
            
              
        <li><a href="/development/reference/supported-features.html">Cobalt support</a></li>
              
            
      </ul>
    </li>
          
        
      
  </ul>
    
</li>
  

  
<li class="expand-container" data-expander-target-search="relative">
    
      
      
<h4 class="no-submenu"><a href="/contributors/index.html">Contributors</a></h4>
      
    
</li>
  

  
<li class="expand-container" data-expander-target-search="relative">
    
      
      
<h4 class="no-submenu"><a href="/communication.html">Communication</a></h4>
      
    
</li>
  


      </ul>
    </div>
    <div class="col-md-3 show-share-buttons-bottom" id="rightCol">
      <div class="nav nav-stacked" id="tocSidebar">
        
        <div id="toc"></div>
        
          <div id="rightCol-share-buttons" class="share-buttons-bottom">
            

  


          </div>
        
      </div>
    </div>
    <div class="col-md-7" id="centerCol">
      <div id="content">
        <p>Defines an interface for controlling playback of media elementary streams.</p>

<h2 id="macros">Macros</h2>

<h3 id="sb_player_initial_ticket">SB_PLAYER_INITIAL_TICKET</h3>

<p>The value of the initial ticket held by the player before the first seek. The
player will use this ticket value to make the first call to SbPlayerStatusFunc
with kSbPlayerStateInitialized.</p>

<h3 id="sb_player_no_duration">SB_PLAYER_NO_DURATION</h3>

<p>The value to pass into SbPlayerCreate&#39;s <code class="prettyprint">duration_pts</code> argument for cases where
the duration is unknown, such as for live streams.</p>

<h3 id="ksbplayerinvalid">kSbPlayerInvalid</h3>

<p>Well-defined value for an invalid player.</p>

<h2 id="enums">Enums</h2>

<h3 id="sbplayerdecoderstate">SbPlayerDecoderState</h3>

<p>An indicator of whether the decoder can accept more samples.</p>

<h4 id="values">Values</h4>

<ul>
<li><p><code class="prettyprint">kSbPlayerDecoderStateNeedsData</code></p>

<p>The decoder is asking for one more sample.</p></li>
<li><p><code class="prettyprint">kSbPlayerDecoderStateBufferFull</code></p>

<p>The decoder is not ready for any more samples, so do not send them. Note
that this enum value has been deprecated and the SbPlayer implementation
should no longer use this value.</p></li>
<li><p><code class="prettyprint">kSbPlayerDecoderStateDestroyed</code></p>

<p>The player has been destroyed, and will send no more callbacks.</p></li>
</ul>

<h3 id="sbplayerstate">SbPlayerState</h3>

<p>An indicator of the general playback state.</p>

<h4 id="values">Values</h4>

<ul>
<li><p><code class="prettyprint">kSbPlayerStateInitialized</code></p>

<p>The player has just been initialized. It is expecting an SbPlayerSeek() call
to enter the prerolling state.</p></li>
<li><p><code class="prettyprint">kSbPlayerStatePrerolling</code></p>

<p>The player is prerolling, collecting enough data to fill the pipeline before
presentation starts. After the first preroll is completed, there should
always be a video frame to render, even if the player goes back to
Prerolling after a Seek.</p></li>
<li><p><code class="prettyprint">kSbPlayerStatePresenting</code></p>

<p>The player is presenting media, and it is either paused or actively playing
in real-time. Note that the implementation should use this state to signal
that the preroll has been finished.</p></li>
<li><p><code class="prettyprint">kSbPlayerStateEndOfStream</code></p>

<p>The player is presenting media, but it is paused at the end of the stream.</p></li>
<li><p><code class="prettyprint">kSbPlayerStateDestroyed</code></p>

<p>The player has been destroyed, and will send no more callbacks.</p></li>
</ul>

<h2 id="typedefs">Typedefs</h2>

<h3 id="sbplayer">SbPlayer</h3>

<p>An opaque handle to an implementation-private structure representing a player.</p>

<h4 id="definition">Definition</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">typedef struct SbPlayerPrivate* SbPlayer
</code></pre></div>
<h3 id="sbplayerdeallocatesamplefunc">SbPlayerDeallocateSampleFunc</h3>

<p>Callback to free the given sample buffer data. When more than one buffer are
sent in SbPlayerWriteSample(), the implementation only has to call this callback
with <code class="prettyprint">sample_buffer</code> points to the the first buffer.</p>

<h4 id="definition">Definition</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">typedef void(* SbPlayerDeallocateSampleFunc) (SbPlayer player, void *context, const void *sample_buffer)
</code></pre></div>
<h3 id="sbplayerdecoderstatusfunc">SbPlayerDecoderStatusFunc</h3>

<p>Callback for decoder status updates, called in response to a call to
SbPlayerSeek() or SbPlayerWriteSample(). This callback will never be called
until at least one call to SbPlayerSeek has occurred. <code class="prettyprint">ticket</code> will be set to
the ticket passed into the last received call to SbPlayerSeek() at the time this
callback was dispatched. This is to distinguish status callbacks for
interrupting seeks. These callbacks will happen on a different thread than the
calling thread, and it is not valid to call SbPlayer functions from within this
callback. After an update with kSbPlayerDecoderStateNeedsData, the user of the
player will make at most one call to SbPlayerWriteSample() or
SbPlayerWriteEndOfStream(). The player implementation should update the decoder
status again after such call to notify its user to continue writing more frames.</p>

<h4 id="definition">Definition</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">typedef void(* SbPlayerDecoderStatusFunc) (SbPlayer player, void *context, SbMediaType type, SbPlayerDecoderState state, int ticket)
</code></pre></div>
<h3 id="sbplayerencryptedmediainitdataencounteredcb">SbPlayerEncryptedMediaInitDataEncounteredCB</h3>

<p>Callback to queue an encrypted event for initialization data encountered in
media data. <code class="prettyprint">init_data_type</code> should be a string matching one of the EME
initialization data types : &quot;cenc&quot;, &quot;fairplay&quot;, &quot;keyids&quot;, or &quot;webm&quot;, <code class="prettyprint">init_data</code>
is the initialization data, and <code class="prettyprint">init_data_length</code> is the length of the data.</p>

<h4 id="definition">Definition</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">typedef void(* SbPlayerEncryptedMediaInitDataEncounteredCB) (SbPlayer player, void *context, const char *init_data_type, const unsigned char *init_data, unsigned int init_data_length)
</code></pre></div>
<h3 id="sbplayererrorfunc">SbPlayerErrorFunc</h3>

<p>Callback for player errors, that may set a <code class="prettyprint">message</code>. <code class="prettyprint">error</code>: indicates the
error code. <code class="prettyprint">message</code>: provides specific informative diagnostic message about
the error condition encountered. It is ok for the message to be an empty string
or NULL if no information is available.</p>

<h4 id="definition">Definition</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">typedef void(* SbPlayerErrorFunc) (SbPlayer player, void *context, SbPlayerError error, const char *message)
</code></pre></div>
<h3 id="sbplayerstatusfunc">SbPlayerStatusFunc</h3>

<p>Callback for player status updates. These callbacks will happen on a different
thread than the calling thread, and it is not valid to call SbPlayer functions
from within this callback.</p>

<h4 id="definition">Definition</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">typedef void(* SbPlayerStatusFunc) (SbPlayer player, void *context, SbPlayerState state, int ticket)
</code></pre></div>
<h2 id="structs">Structs</h2>

<h3 id="sbplayerinfo">SbPlayerInfo</h3>

<p>Information about the current media playback state.</p>

<h4 id="members">Members</h4>

<ul>
<li><p><code class="prettyprint">SbMediaTime current_media_pts</code></p>

<p>The position of the playback head, as precisely as possible, in 90KHz ticks
(PTS).</p></li>
<li><p><code class="prettyprint">SbMediaTime duration_pts</code></p>

<p>The known duration of the currently playing media stream, in 90KHz ticks
(PTS).</p></li>
<li><p><code class="prettyprint">SbTime start_date</code></p>

<p>The result of getStartDate for the currently playing media stream, in
microseconds since the epoch of January 1, 1601 UTC.</p></li>
<li><p><code class="prettyprint">int frame_width</code></p>

<p>The width of the currently displayed frame, in pixels, or 0 if not provided
by this player.</p></li>
<li><p><code class="prettyprint">int frame_height</code></p>

<p>The height of the currently displayed frame, in pixels, or 0 if not provided
by this player.</p></li>
<li><p><code class="prettyprint">bool is_paused</code></p>

<p>Whether playback is currently paused.</p></li>
<li><p><code class="prettyprint">double volume</code></p>

<p>The current player volume in [0, 1].</p></li>
<li><p><code class="prettyprint">int total_video_frames</code></p>

<p>The number of video frames sent to the player since the creation of the
player.</p></li>
<li><p><code class="prettyprint">int dropped_video_frames</code></p>

<p>The number of video frames decoded but not displayed since the creation of
the player.</p></li>
<li><p><code class="prettyprint">int corrupted_video_frames</code></p>

<p>The number of video frames that failed to be decoded since the creation of
the player.</p></li>
<li><p><code class="prettyprint">double playback_rate</code></p>

<p>The rate of playback. The video is played back in a speed that is
proportional to this. By default it is 1.0 which indicates that the playback
is at normal speed. When it is greater than one, the video is played in a
faster than normal speed. When it is less than one, the video is played in a
slower than normal speed. Negative speeds are not supported.</p></li>
<li><p><code class="prettyprint">SbMediaTime buffer_start_pts</code></p>

<p>The position of the buffer head, as precisely as possible, in 90KHz ticks
(PTS).</p></li>
<li><p><code class="prettyprint">SbMediaTime buffer_duration_pts</code></p>

<p>The known duration of the currently playing media buffer, in 90KHz ticks
(PTS).</p></li>
</ul>

<h3 id="sbplayersampleinfo">SbPlayerSampleInfo</h3>

<p>Information about the samples to be written into SbPlayerWriteSample2.</p>

<h4 id="members">Members</h4>

<ul>
<li><p><code class="prettyprint">const void * buffer</code></p>

<p>Points to the buffer containing the sample data.</p></li>
<li><p><code class="prettyprint">int buffer_size</code></p>

<p>Size of the data pointed to by <code class="prettyprint">buffer</code>.</p></li>
<li><p><code class="prettyprint">SbTime timestamp</code></p>

<p>The timestamp of the sample in SbTime.</p></li>
<li><p><code class="prettyprint">constSbMediaVideoSampleInfo* video_sample_info</code></p>

<p>Information about a video sample. This value is required for video samples.
Otherwise, it must be <code class="prettyprint">NULL</code>.</p></li>
<li><p><code class="prettyprint">constSbDrmSampleInfo* drm_info</code></p>

<p>The DRM system related info for the media sample. This value is required for
encrypted samples. Otherwise, it must be <code class="prettyprint">NULL</code>.</p></li>
</ul>

<h2 id="functions">Functions</h2>

<h3 id="sbplayercreatewithurl">SbPlayerCreateWithUrl</h3>

<p>Creates a URL-based SbPlayer that will be displayed on <code class="prettyprint">window</code> for the
specified URL <code class="prettyprint">url</code>, acquiring all resources needed to operate it, and returning
an opaque handle to it. The expectation is that a new player will be created and
destroyed for every playback.</p>

<p>In many ways this function is similar to SbPlayerCreate, but it is missing the
input arguments related to the configuration and format of the audio and video
stream, as well as the DRM system. The DRM system for a player created with
SbPlayerCreateWithUrl can be set after creation using SbPlayerSetDrmSystem.
Because the DRM system is not available at the time of SbPlayerCreateWithUrl, it
takes in a callback, <code class="prettyprint">encrypted_media_init_data_encountered_cb</code>, which is run
when encrypted media initial data is encountered.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">SbPlayer SbPlayerCreateWithUrl(const char *url, SbWindow window, SbMediaTime duration_pts, SbPlayerStatusFunc player_status_func, SbPlayerEncryptedMediaInitDataEncounteredCB encrypted_media_init_data_encountered_cb, SbPlayerErrorFunc player_error_func, void *context)
</code></pre></div>
<h3 id="sbplayerdestroy">SbPlayerDestroy</h3>

<p>Destroys <code class="prettyprint">player</code>, freeing all associated resources. Each callback must receive
one more callback to say that the player was destroyed. Callbacks may be in-
flight when SbPlayerDestroy is called, and should be ignored once this function
is called.</p>

<p>It is not allowed to pass <code class="prettyprint">player</code> into any other <code class="prettyprint">SbPlayer</code> function once
SbPlayerDestroy has been called on that player.</p>

<p><code class="prettyprint">player</code>: The player to be destroyed.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void SbPlayerDestroy(SbPlayer player)
</code></pre></div>
<h3 id="sbplayergetcurrentframe">SbPlayerGetCurrentFrame</h3>

<p>Given a player created with the kSbPlayerOutputModeDecodeToTexture output mode,
it will return a SbDecodeTarget representing the current frame to be rasterized.
On GLES systems, this function must be called on a thread with an EGLContext
current, and specifically the EGLContext that will be used to eventually render
the frame. If this function is called with a <code class="prettyprint">player</code> object that was created
with an output mode other than kSbPlayerOutputModeDecodeToTexture,
kSbDecodeTargetInvalid is returned.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">SbDecodeTarget SbPlayerGetCurrentFrame(SbPlayer player)
</code></pre></div>
<h3 id="sbplayergetinfo">SbPlayerGetInfo</h3>

<p>Gets a snapshot of the current player state and writes it to <code class="prettyprint">out_player_info</code>.
This function may be called very frequently and is expected to be inexpensive.</p>

<p><code class="prettyprint">player</code>: The player about which information is being retrieved.
<code class="prettyprint">out_player_info</code>: The information retrieved for the player.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void SbPlayerGetInfo(SbPlayer player, SbPlayerInfo *out_player_info)
</code></pre></div>
<h3 id="sbplayerisvalid">SbPlayerIsValid</h3>

<p>Returns whether the given player handle is valid.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">static bool SbPlayerIsValid(SbPlayer player)
</code></pre></div>
<h3 id="sbplayeroutputmodesupportedwithurl">SbPlayerOutputModeSupportedWithUrl</h3>

<p>Returns true if the given URL player output mode is supported by the platform.
If this function returns true, it is okay to call SbPlayerCreate() with the
given <code class="prettyprint">output_mode</code>.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">bool SbPlayerOutputModeSupportedWithUrl(SbPlayerOutputMode output_mode)
</code></pre></div>
<h3 id="sbplayersetbounds">SbPlayerSetBounds</h3>

<p>Sets the player bounds to the given graphics plane coordinates. The changes do
not take effect until the next graphics frame buffer swap. The default bounds
for a player is the full screen. This function is only relevant when the
<code class="prettyprint">player</code> is created with the kSbPlayerOutputModePunchOut output mode, and if
this is not the case then this function call can be ignored.</p>

<p>This function is called on every graphics frame that changes the video bounds.
For example, if the video bounds are being animated, then this will be called at
up to 60 Hz. Since the function could be called up to once per frame,
implementors should take care to avoid related performance concerns with such
frequent calls.</p>

<p><code class="prettyprint">player</code>: The player that is being resized. <code class="prettyprint">z_index</code>: The z-index of the
player. When the bounds of multiple players are overlapped, the one with larger
z-index will be rendered on top of the ones with smaller z-index. <code class="prettyprint">x</code>: The
x-coordinate of the upper-left corner of the player. <code class="prettyprint">y</code>: The y-coordinate of
the upper-left corner of the player. <code class="prettyprint">width</code>: The width of the player, in
pixels. <code class="prettyprint">height</code>: The height of the player, in pixels.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void SbPlayerSetBounds(SbPlayer player, int z_index, int x, int y, int width, int height)
</code></pre></div>
<h3 id="sbplayersetdrmsystem">SbPlayerSetDrmSystem</h3>

<p>Sets the DRM system of a running URL-based SbPlayer created with
SbPlayerCreateWithUrl. This may only be run once for a given SbPlayer.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void SbPlayerSetDrmSystem(SbPlayer player, SbDrmSystem drm_system)
</code></pre></div>
<h3 id="sbplayersetplaybackrate">SbPlayerSetPlaybackRate</h3>

<p>Set the playback rate of the <code class="prettyprint">player</code>. <code class="prettyprint">rate</code> is default to 1.0 which indicates
the playback is at its original speed. A <code class="prettyprint">rate</code> greater than one will make the
playback faster than its original speed. For example, when <code class="prettyprint">rate</code> is 2, the
video will be played at twice the speed as its original speed. A <code class="prettyprint">rate</code> less
than 1.0 will make the playback slower than its original speed. When <code class="prettyprint">rate</code> is
0, the playback will be paused. The function returns true when the playback rate
is set to <code class="prettyprint">playback_rate</code> or to a rate that is close to <code class="prettyprint">playback_rate</code> which
the implementation supports. It returns false when the playback rate is
unchanged, this can happen when <code class="prettyprint">playback_rate</code> is negative or if it is too high
to support.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">bool SbPlayerSetPlaybackRate(SbPlayer player, double playback_rate)
</code></pre></div>
<h3 id="sbplayersetvolume">SbPlayerSetVolume</h3>

<p>Sets the player&#39;s volume.</p>

<p><code class="prettyprint">player</code>: The player in which the volume is being adjusted. <code class="prettyprint">volume</code>: The new
player volume. The value must be between <code class="prettyprint">0.0</code> and <code class="prettyprint">1.0</code>, inclusive. A value of
<code class="prettyprint">0.0</code> means that the audio should be muted, and a value of <code class="prettyprint">1.0</code> means that it
should be played at full volume.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void SbPlayerSetVolume(SbPlayer player, double volume)
</code></pre></div>
<h3 id="sbplayerwriteendofstream">SbPlayerWriteEndOfStream</h3>

<p>Writes a marker to <code class="prettyprint">player</code>&#39;s input stream of <code class="prettyprint">stream_type</code> indicating that
there are no more samples for that media type for the remainder of this media
stream. This marker is invalidated, along with the rest of the stream&#39;s
contents, after a call to SbPlayerSeek.</p>

<p><code class="prettyprint">player</code>: The player to which the marker is written. <code class="prettyprint">stream_type</code>: The type of
stream for which the marker is written.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void SbPlayerWriteEndOfStream(SbPlayer player, SbMediaType stream_type)
</code></pre></div>
<h3 id="sbplayerwritesample">SbPlayerWriteSample</h3>

<p>Writes a single sample of the given media type to <code class="prettyprint">player</code>&#39;s input stream. Its
data may be passed in via more than one buffers. The lifetime of
<code class="prettyprint">sample_buffers</code>, <code class="prettyprint">sample_buffer_sizes</code>, <code class="prettyprint">video_sample_info</code>, and
<code class="prettyprint">sample_drm_info</code> (as well as member <code class="prettyprint">subsample_mapping</code> contained inside it)
are not guaranteed past the call to SbPlayerWriteSample. That means that before
returning, the implementation must synchronously copy any information it wants
to retain from those structures.</p>

<p><code class="prettyprint">player</code>: The player to which the sample is written. <code class="prettyprint">sample_type</code>: The type of
sample being written. See the <code class="prettyprint">SbMediaType</code> enum in media.h. <code class="prettyprint">sample_buffers</code>: A
pointer to an array of buffers with <code class="prettyprint">number_of_sample_buffers</code> elements that
hold the data for this sample. The buffers are expected to be a portion of a
bytestream of the codec type that the player was created with. The buffers
should contain a sequence of whole NAL Units for video, or a complete audio
frame. <code class="prettyprint">sample_buffers</code> cannot be assumed to live past the call into
SbPlayerWriteSample(), so it must be copied if its content will be used after
SbPlayerWriteSample() returns. <code class="prettyprint">sample_buffer_sizes</code>: A pointer to an array of
sizes with <code class="prettyprint">number_of_sample_buffers</code> elements. Each of them specify the number
of bytes in the corresponding buffer contained in <code class="prettyprint">sample_buffers</code>. None of them
can be 0. <code class="prettyprint">sample_buffer_sizes</code> cannot be assumed to live past the call into
SbPlayerWriteSample(), so it must be copied if its content will be used after
SbPlayerWriteSample() returns. <code class="prettyprint">number_of_sample_buffers</code>: Specify the number of
elements contained inside <code class="prettyprint">sample_buffers</code> and <code class="prettyprint">sample_buffer_sizes</code>. It has to
be at least one, or the call will be ignored. <code class="prettyprint">sample_pts</code>: The timestamp of the
sample in 90KHz ticks (PTS). Note that samples MAY be written &quot;slightly&quot; out of
order. <code class="prettyprint">video_sample_info</code>: Information about a video sample. This value is
required if <code class="prettyprint">sample_type</code> is <code class="prettyprint">kSbMediaTypeVideo</code>. Otherwise, it must be <code class="prettyprint">NULL</code>.
<code class="prettyprint">sample_drm_info</code>: The DRM system related info for the media sample. This value
is required for encrypted samples. Otherwise, it must be <code class="prettyprint">NULL</code>.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void SbPlayerWriteSample(SbPlayer player, SbMediaType sample_type, const void *const *sample_buffers, const int *sample_buffer_sizes, int number_of_sample_buffers, SbMediaTime sample_pts, const SbMediaVideoSampleInfo *video_sample_info, const SbDrmSampleInfo *sample_drm_info)
</code></pre></div>
        
          
            
          
        
      </div>
    </div>
  </div>

</div>


    
      <footer>
<div class="container">
    <div class="row">
      
        <div class="col-md-5 column-left">
          
          
            
              
  
    <span class="copyright-text">© Google 2019</span>
  


            
            
            
            
            
          
        </div>
      
        <div class="col-md-2 column-middle">
          
          
            
            
            
            
              
  <img class="footer-logo" src="/images/cobalt-logo.png" alt="Cobalt"/>


            
            
          
        </div>
      
<!--
          
          <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-share-button" data-href="/reference/starboard/modules/6/player.html" data-layout=""></div>
&nbsp;
          <a href="https://twitter.com/" class="twitter-follow-button" data-show-screen-name="false" data-show-count="false" data-size=""></a>

<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>


-->
    </div>
</div>
</footer>

    

    <!-- TODO: Make sure no badness from moving common.js to styles.liquid -->

    
  </body>
</html>
