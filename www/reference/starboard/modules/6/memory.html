<!DOCTYPE html>
<html lang="en" itemscope itemtype="https://schema.org/WebPage">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Cobalt / Starboard Module Reference: memory.h</title>

            <!-- Webfont -->
    
    <link href='https://fonts.googleapis.com/css?family=Kavoon|Material+Icons' rel='stylesheet' type='text/css'>
    


    <!-- Material Design Lite -->
    <link href="/assets/material-design-lite/material.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <!-- Bootstrap -->
    <link href="/assets/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Styles -->
    <link rel="stylesheet" type="text/css" href="/css/site.css" />

    <!-- Font Awesome icons -->
    <link href="/assets/font-awesome-4.4.0/css/font-awesome.min.css"
          rel="stylesheet"
          type="text/css">
    
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="/assets/bootstrap/js/bootstrap.min.js"></script>

    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>

    <!-- material design lite -->
    <script src="/assets/material-design-lite/material.min.js"></script>
    
    <!-- Include the common site javascript -->
    <script src="/js/common.js" type="text/javascript" charset="utf-8"></script>


    <!-- metadata -->
    <meta name="og:title" content="Cobalt / Starboard Module Reference: memory.h"/>
    <meta name="og:image" content="/images/cobalt-logo.png"/>
    <meta name="og:description" content="A high-performance, small-footprint platform that implements a subset of HTML5/CSS/JS to run applications, including the YouTube TV app."/>
  </head>
  <body class="docs" id="top_of_page">

    <span id="toc-depth" data-toc-depth="h2,h3"></span>



    <nav id="common-nav" class="navbar navbar-fixed-top inverse">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
      <a class="navbar-brand" href="/">
        <img class="logo" src="/images/cobalt-logo.png" alt="Cobalt">
      </a>
      
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right" id="standard-menu-links">
        
  
    
  
  
    
      <li><a href="/starboard/porting.html">Porters</a></li>
    
  

  
    
  
  
    
      <li><a href="/development/setup-linux.html">Developers</a></li>
    
  

  
    
  
  
    
      <li><a href="/contributors/index.html">Contributors</a></li>
    
  

  
    
  
  
    
      
        <li><a href="https://cobalt.googlesource.com/cobalt">Code Repo</a></li>
      
    
  


      </ul>
      <ul class="nav nav-stacked mobile-left-nav-menu" id="collapsed-left-menu">
        
  
<li class="expand-container" data-expander-target-search="relative">
    
      
      
<h4 class="no-submenu no-top-margin"><a href="/overview.html">Overview</a></h4>
      
    
</li>
  

  
<li class="expand-container" data-expander-target-search="relative">
    
      
        
          <h4 class="submenu">Porters</h4>
        
      
  <ul class="content">
      
        
    <li><b>Guides</b>
          
      <ul>
            
              
        <li><a href="/starboard/porting.html">Port Cobalt to your platform</a></li>
              
            
              
        <li><a href="/starboard/testing.html">Testing with NPLB</a></li>
              
            
      </ul>
    </li>
          
        
      
        
    <li><b>Reference</b>
          
      <ul>
            
              
        <li><a href="/reference/starboard/configuration-public.html">configuration_public.h</a></li>
              
            
              
        <li><a href="/reference/starboard/gyp-configuration.html">gyp_configuration.gypi</a></li>
              
            
              
                <li><b>Starboard modules</b>
                
          <ul>
                  
                    
                      <li><a href="/reference/starboard/modules/accessibility.html">accessibility.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/atomic.html">atomic.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/audio_sink.html">audio_sink.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/blitter.html">blitter.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/byte_swap.html">byte_swap.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/character.html">character.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/condition_variable.html">condition_variable.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/configuration.html">configuration.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/cryptography.html">cryptography.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/decode_target.html">decode_target.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/directory.html">directory.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/double.html">double.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/drm.html">drm.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/event.html">event.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/export.html">export.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/file.html">file.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/image.html">image.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/input.html">input.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/key.html">key.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/log.html">log.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/media.html">media.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/memory.html">memory.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/memory_reporter.html">memory_reporter.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/microphone.html">microphone.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/mutex.html">mutex.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/once.html">once.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/player.html">player.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/queue.html">queue.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/socket.html">socket.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/socket_waiter.html">socket_waiter.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/speech_recognizer.html">speech_recognizer.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/speech_synthesis.html">speech_synthesis.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/spin_lock.html">spin_lock.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/storage.html">storage.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/string.html">string.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/system.html">system.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/thread.html">thread.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/thread_types.html">thread_types.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/time.html">time.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/time_zone.html">time_zone.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/types.html">types.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/user.html">user.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/window.html">window.h</a></li>
                    
                  
          </ul>
                
              
            
      </ul>
    </li>
          
        
      
  </ul>
    
</li>
  

  
<li class="expand-container" data-expander-target-search="relative">
    
      
        
          <h4 class="submenu">Developers</h4>
        
      
  <ul class="content">
      
        
    <li><b>Guides</b>
          
      <ul>
            
              
        <li><a href="/development/setup-linux.html">Setup - Linux</a></li>
              
            
              
        <li><a href="/development/setup-raspi.html">Setup - RasPi</a></li>
              
            
      </ul>
    </li>
          
        
      
        
    <li><b>Reference</b>
          
      <ul>
            
              
        <li><a href="/development/reference/supported-features.html">Cobalt support</a></li>
              
            
      </ul>
    </li>
          
        
      
  </ul>
    
</li>
  

  
<li class="expand-container" data-expander-target-search="relative">
    
      
      
<h4 class="no-submenu"><a href="/contributors/index.html">Contributors</a></h4>
      
    
</li>
  

  
<li class="expand-container" data-expander-target-search="relative">
    
      
      
<h4 class="no-submenu"><a href="/communication.html">Communication</a></h4>
      
    
</li>
  


        <li><a href="https://cobalt.googlesource.com/cobalt" id="collapsed-left-menu-repo-link"><i class="fa fa-github"></i> GitHub</a></li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container -->
</nav>


    
<div id="masthead">
  <div class="container">
    <div class="row">
      <div class="col-md-11">
        <h1>Starboard Module Reference: memory.h</h1>
      </div>
    </div>
  </div>
</div>


<div class="container">
    <div class="row scroll-margin" id="toc-content-row">
    <div class="col-md-2" id="leftCol">
      <ul class="nav nav-stacked mobile-left-nav-menu" id="sidebar">
        
  
<li class="expand-container" data-expander-target-search="relative">
    
      
      
<h4 class="no-submenu no-top-margin"><a href="/overview.html">Overview</a></h4>
      
    
</li>
  

  
<li class="expand-container" data-expander-target-search="relative">
    
      
        
          <h4 class="submenu">Porters</h4>
        
      
  <ul class="content">
      
        
    <li><b>Guides</b>
          
      <ul>
            
              
        <li><a href="/starboard/porting.html">Port Cobalt to your platform</a></li>
              
            
              
        <li><a href="/starboard/testing.html">Testing with NPLB</a></li>
              
            
      </ul>
    </li>
          
        
      
        
    <li><b>Reference</b>
          
      <ul>
            
              
        <li><a href="/reference/starboard/configuration-public.html">configuration_public.h</a></li>
              
            
              
        <li><a href="/reference/starboard/gyp-configuration.html">gyp_configuration.gypi</a></li>
              
            
              
                <li><b>Starboard modules</b>
                
          <ul>
                  
                    
                      <li><a href="/reference/starboard/modules/accessibility.html">accessibility.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/atomic.html">atomic.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/audio_sink.html">audio_sink.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/blitter.html">blitter.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/byte_swap.html">byte_swap.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/character.html">character.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/condition_variable.html">condition_variable.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/configuration.html">configuration.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/cryptography.html">cryptography.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/decode_target.html">decode_target.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/directory.html">directory.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/double.html">double.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/drm.html">drm.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/event.html">event.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/export.html">export.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/file.html">file.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/image.html">image.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/input.html">input.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/key.html">key.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/log.html">log.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/media.html">media.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/memory.html">memory.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/memory_reporter.html">memory_reporter.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/microphone.html">microphone.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/mutex.html">mutex.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/once.html">once.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/player.html">player.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/queue.html">queue.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/socket.html">socket.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/socket_waiter.html">socket_waiter.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/speech_recognizer.html">speech_recognizer.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/speech_synthesis.html">speech_synthesis.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/spin_lock.html">spin_lock.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/storage.html">storage.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/string.html">string.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/system.html">system.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/thread.html">thread.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/thread_types.html">thread_types.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/time.html">time.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/time_zone.html">time_zone.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/types.html">types.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/user.html">user.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/window.html">window.h</a></li>
                    
                  
          </ul>
                
              
            
      </ul>
    </li>
          
        
      
  </ul>
    
</li>
  

  
<li class="expand-container" data-expander-target-search="relative">
    
      
        
          <h4 class="submenu">Developers</h4>
        
      
  <ul class="content">
      
        
    <li><b>Guides</b>
          
      <ul>
            
              
        <li><a href="/development/setup-linux.html">Setup - Linux</a></li>
              
            
              
        <li><a href="/development/setup-raspi.html">Setup - RasPi</a></li>
              
            
      </ul>
    </li>
          
        
      
        
    <li><b>Reference</b>
          
      <ul>
            
              
        <li><a href="/development/reference/supported-features.html">Cobalt support</a></li>
              
            
      </ul>
    </li>
          
        
      
  </ul>
    
</li>
  

  
<li class="expand-container" data-expander-target-search="relative">
    
      
      
<h4 class="no-submenu"><a href="/contributors/index.html">Contributors</a></h4>
      
    
</li>
  

  
<li class="expand-container" data-expander-target-search="relative">
    
      
      
<h4 class="no-submenu"><a href="/communication.html">Communication</a></h4>
      
    
</li>
  


      </ul>
    </div>
    <div class="col-md-3 show-share-buttons-bottom" id="rightCol">
      <div class="nav nav-stacked" id="tocSidebar">
        
        <div id="toc"></div>
        
          <div id="rightCol-share-buttons" class="share-buttons-bottom">
            

  


          </div>
        
      </div>
    </div>
    <div class="col-md-7" id="centerCol">
      <div id="content">
        <p>Defines functions for memory allocation, alignment, copying, and comparing.</p>

<h2 id="porters">Porters</h2>

<p>All of the &quot;Unchecked&quot; and &quot;Free&quot; functions must be implemented, but they should
not be called directly. The Starboard platform wraps them with extra accounting
under certain circumstances.</p>

<h2 id="porters-and-application-developers">Porters and Application Developers</h2>

<p>Nobody should call the &quot;Checked&quot;, &quot;Unchecked&quot; or &quot;Free&quot; functions directly
because that evades Starboard&#39;s memory tracking. In both port implementations
and Starboard client application code, you should always call SbMemoryAllocate
and SbMemoryDeallocate rather than SbMemoryAllocateUnchecked and SbMemoryFree.</p>

<ul>
<li><p>The &quot;checked&quot; functions are SbMemoryAllocateChecked(),
SbMemoryReallocateChecked(), and SbMemoryAllocateAlignedChecked().</p></li>
<li><p>The &quot;unchecked&quot; functions are SbMemoryAllocateUnchecked(),
SbMemoryReallocateUnchecked(), and SbMemoryAllocateAlignedUnchecked().</p></li>
<li><p>The &quot;free&quot; functions are SbMemoryFree() and SbMemoryFreeAligned().</p></li>
</ul>

<h2 id="enums">Enums</h2>

<h3 id="sbmemorymapflags">SbMemoryMapFlags</h3>

<p>The bitwise OR of these flags should be passed to SbMemoryMap to indicate how
the mapped memory can be used.</p>

<h4 id="values">Values</h4>

<ul>
<li><p><code class="prettyprint">kSbMemoryMapProtectRead</code></p>

<p>No flags set: Reserves virtual address space. SbMemoryProtect() can later
make it accessible.</p></li>
<li><p><code class="prettyprint">kSbMemoryMapProtectWrite</code></p></li>
<li><p><code class="prettyprint">kSbMemoryMapProtectExec</code></p></li>
<li><p><code class="prettyprint">kSbMemoryMapProtectReadWrite</code></p></li>
</ul>

<h2 id="functions">Functions</h2>

<h3 id="sbmemoryaligntopagesize">SbMemoryAlignToPageSize</h3>

<p>Rounds <code class="prettyprint">size</code> up to SB_MEMORY_PAGE_SIZE.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">static size_t SbMemoryAlignToPageSize(size_t size)
</code></pre></div>
<h3 id="sbmemoryallocate">SbMemoryAllocate</h3>

<p>Allocates and returns a chunk of memory of at least <code class="prettyprint">size</code> bytes. This function
should be called from the client codebase. It is intended to be a drop-in
replacement for <code class="prettyprint">malloc</code>.</p>

<p>Note that this function returns <code class="prettyprint">NULL</code> if it is unable to allocate the memory.</p>

<p><code class="prettyprint">size</code>: The amount of memory to be allocated. If <code class="prettyprint">size</code> is 0, the function may
return <code class="prettyprint">NULL</code> or it may return a unique pointer value that can be passed to
SbMemoryDeallocate.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void* SbMemoryAllocate(size_t size)
</code></pre></div>
<h3 id="sbmemoryallocatealigned">SbMemoryAllocateAligned</h3>

<p>Allocates and returns a chunk of memory of at least <code class="prettyprint">size</code> bytes, aligned to
<code class="prettyprint">alignment</code>. This function should be called from the client codebase. It is
meant to be a drop-in replacement for <code class="prettyprint">memalign</code>.</p>

<p>The function returns <code class="prettyprint">NULL</code> if it cannot allocate the memory. In addition, the
function&#39;s behavior is undefined if <code class="prettyprint">alignment</code> is not a power of two.</p>

<p><code class="prettyprint">alignment</code>: The way that data is arranged and accessed in memory. The value
must be a power of two. <code class="prettyprint">size</code>: The size of the memory to be allocated. If
<code class="prettyprint">size</code> is <code class="prettyprint">0</code>, the function may return <code class="prettyprint">NULL</code> or it may return a unique aligned
pointer value that can be passed to SbMemoryDeallocateAligned.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void* SbMemoryAllocateAligned(size_t alignment, size_t size)
</code></pre></div>
<h3 id="sbmemoryallocatealignedchecked">SbMemoryAllocateAlignedChecked</h3>

<p>Same as SbMemoryAllocateAlignedUnchecked, but will abort() in the case of an
allocation failure.</p>

<p>DO NOT CALL. Call SbMemoryAllocateAligned(...) instead.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void* SbMemoryAllocateAlignedChecked(size_t alignment, size_t size)
</code></pre></div>
<h3 id="sbmemoryallocatealignedunchecked">SbMemoryAllocateAlignedUnchecked</h3>

<p>This is the implementation of SbMemoryAllocateAligned that must be provided by
Starboard ports.</p>

<p>DO NOT CALL. Call SbMemoryAllocateAligned(...) instead.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void* SbMemoryAllocateAlignedUnchecked(size_t alignment, size_t size)
</code></pre></div>
<h3 id="sbmemoryallocatechecked">SbMemoryAllocateChecked</h3>

<p>Same as SbMemoryAllocateUnchecked, but will abort() in the case of an allocation
failure.</p>

<p>DO NOT CALL. Call SbMemoryAllocate(...) instead.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void* SbMemoryAllocateChecked(size_t size)
</code></pre></div>
<h3 id="sbmemoryallocatenoreport">SbMemoryAllocateNoReport</h3>

<p>Same as SbMemoryAllocate() but will not report memory to the tracker. Avoid
using this unless absolutely necessary.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void* SbMemoryAllocateNoReport(size_t size)
</code></pre></div>
<h3 id="sbmemoryallocateunchecked">SbMemoryAllocateUnchecked</h3>

<p>This is the implementation of SbMemoryAllocate that must be provided by
Starboard ports.</p>

<p>DO NOT CALL. Call SbMemoryAllocate(...) instead.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void* SbMemoryAllocateUnchecked(size_t size)
</code></pre></div>
<h3 id="sbmemorycalloc">SbMemoryCalloc</h3>

<p>A wrapper that implements a drop-in replacement for <code class="prettyprint">calloc</code>, which is used in
some packages.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">static void* SbMemoryCalloc(size_t count, size_t size)
</code></pre></div>
<h3 id="sbmemorycompare">SbMemoryCompare</h3>

<p>Compares the contents of the first <code class="prettyprint">count</code> bytes of <code class="prettyprint">buffer1</code> and <code class="prettyprint">buffer2</code>.
This function returns:</p>

<ul>
<li><p><code class="prettyprint">-1</code> if <code class="prettyprint">buffer1</code> is &quot;less-than&quot; <code class="prettyprint">buffer2</code></p></li>
<li><p><code class="prettyprint">0</code> if <code class="prettyprint">buffer1</code> and <code class="prettyprint">buffer2</code> are equal</p></li>
<li><p><code class="prettyprint">1</code> if <code class="prettyprint">buffer1</code> is &quot;greater-than&quot; <code class="prettyprint">buffer2</code>.</p></li>
</ul>

<p>This function is meant to be a drop-in replacement for <code class="prettyprint">memcmp</code>.</p>

<p><code class="prettyprint">buffer1</code>: The first buffer to be compared. <code class="prettyprint">buffer2</code>: The second buffer to be
compared. <code class="prettyprint">count</code>: The number of bytes to be compared.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">int SbMemoryCompare(const void *buffer1, const void *buffer2, size_t count)
</code></pre></div>
<h3 id="sbmemorycopy">SbMemoryCopy</h3>

<p>Copies <code class="prettyprint">count</code> sequential bytes from <code class="prettyprint">source</code> to <code class="prettyprint">destination</code>, without support
for the <code class="prettyprint">source</code> and <code class="prettyprint">destination</code> regions overlapping. This function is meant
to be a drop-in replacement for <code class="prettyprint">memcpy</code>.</p>

<p>The function&#39;s behavior is undefined if <code class="prettyprint">destination</code> or <code class="prettyprint">source</code> are NULL, and
the function is a no-op if <code class="prettyprint">count</code> is 0. The return value is <code class="prettyprint">destination</code>.</p>

<p><code class="prettyprint">destination</code>: The destination of the copied memory. <code class="prettyprint">source</code>: The source of the
copied memory. <code class="prettyprint">count</code>: The number of sequential bytes to be copied.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void* SbMemoryCopy(void *destination, const void *source, size_t count)
</code></pre></div>
<h3 id="sbmemorydeallocate">SbMemoryDeallocate</h3>

<p>Frees a previously allocated chunk of memory. If <code class="prettyprint">memory</code> is NULL, then the
operation is a no-op. This function should be called from the client codebase.
It is meant to be a drop-in replacement for <code class="prettyprint">free</code>.</p>

<p><code class="prettyprint">memory</code>: The chunk of memory to be freed.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void SbMemoryDeallocate(void *memory)
</code></pre></div>
<h3 id="sbmemorydeallocatealigned">SbMemoryDeallocateAligned</h3>

<p><code class="prettyprint">memory</code>: The chunk of memory to be freed. If <code class="prettyprint">memory</code> is NULL, then the
function is a no-op.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void SbMemoryDeallocateAligned(void *memory)
</code></pre></div>
<h3 id="sbmemorydeallocatenoreport">SbMemoryDeallocateNoReport</h3>

<p>Same as SbMemoryDeallocate() but will not report memory deallocation to the
tracker. This function must be matched with SbMemoryAllocateNoReport().</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void SbMemoryDeallocateNoReport(void *memory)
</code></pre></div>
<h3 id="sbmemoryfindbyte">SbMemoryFindByte</h3>

<p>Finds the lower 8-bits of <code class="prettyprint">value</code> in the first <code class="prettyprint">count</code> bytes of <code class="prettyprint">buffer</code> and
returns either a pointer to the first found occurrence or <code class="prettyprint">NULL</code> if the value is
not found. This function is meant to be a drop-in replacement for <code class="prettyprint">memchr</code>.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">const void* SbMemoryFindByte(const void *buffer, int value, size_t count)
</code></pre></div>
<h3 id="sbmemoryflush">SbMemoryFlush</h3>

<p>Flushes any data in the given virtual address range that is cached locally in
the current processor core to physical memory, ensuring that data and
instruction caches are cleared. This is required to be called on executable
memory that has been written to and might be executed in the future.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void SbMemoryFlush(void *virtual_address, int64_t size_bytes)
</code></pre></div>
<h3 id="sbmemoryfree">SbMemoryFree</h3>

<p>This is the implementation of SbMemoryDeallocate that must be provided by
Starboard ports.</p>

<p>DO NOT CALL. Call SbMemoryDeallocate(...) instead.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void SbMemoryFree(void *memory)
</code></pre></div>
<h3 id="sbmemoryfreealigned">SbMemoryFreeAligned</h3>

<p>This is the implementation of SbMemoryFreeAligned that must be provided by
Starboard ports.</p>

<p>DO NOT CALL. Call SbMemoryDeallocateAligned(...) instead.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void SbMemoryFreeAligned(void *memory)
</code></pre></div>
<h3 id="sbmemorygetstackbounds">SbMemoryGetStackBounds</h3>

<p>Gets the stack bounds for the current thread.</p>

<p><code class="prettyprint">out_high</code>: The highest addressable byte + 1 for the current thread. <code class="prettyprint">out_low</code>:
The lowest addressable byte for the current thread.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void SbMemoryGetStackBounds(void **out_high, void **out_low)
</code></pre></div>
<h3 id="sbmemoryisaligned">SbMemoryIsAligned</h3>

<p>Checks whether <code class="prettyprint">memory</code> is aligned to <code class="prettyprint">alignment</code> bytes.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">static bool SbMemoryIsAligned(const void *memory, size_t alignment)
</code></pre></div>
<h3 id="sbmemoryiszero">SbMemoryIsZero</h3>

<p>Returns true if the first <code class="prettyprint">count</code> bytes of <code class="prettyprint">buffer</code> are set to zero.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">static bool SbMemoryIsZero(const void *buffer, size_t count)
</code></pre></div>
<h3 id="sbmemorymap">SbMemoryMap</h3>

<p>Allocates <code class="prettyprint">size_bytes</code> worth of physical memory pages and maps them into an
available virtual region. This function returns <code class="prettyprint">SB_MEMORY_MAP_FAILED</code> on
failure. <code class="prettyprint">NULL</code> is a valid return value.</p>

<p><code class="prettyprint">size_bytes</code>: The amount of physical memory pages to be allocated. <code class="prettyprint">flags</code>: The
bitwise OR of the protection flags for the mapped memory as specified in
<code class="prettyprint">SbMemoryMapFlags</code>. Allocating executable memory is not allowed and will fail.
If executable memory is needed, map non-executable memory first and then switch
access to executable using SbMemoryProtect. When kSbMemoryMapProtectReserved is
used, the address space will not be accessible and, if possible, the platform
should not count it against any memory budget. <code class="prettyprint">name</code>: A value that appears in
the debugger on some platforms. The value can be up to 32 bytes.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void* SbMemoryMap(int64_t size_bytes, int flags, const char *name)
</code></pre></div>
<h3 id="sbmemorymove">SbMemoryMove</h3>

<p>Copies <code class="prettyprint">count</code> sequential bytes from <code class="prettyprint">source</code> to <code class="prettyprint">destination</code>, with support for
the <code class="prettyprint">source</code> and <code class="prettyprint">destination</code> regions overlapping. This function is meant to be
a drop-in replacement for <code class="prettyprint">memmove</code>.</p>

<p>The function&#39;s behavior is undefined if <code class="prettyprint">destination</code> or <code class="prettyprint">source</code> are NULL, and
the function is a no-op if <code class="prettyprint">count</code> is 0. The return value is <code class="prettyprint">destination</code>.</p>

<p><code class="prettyprint">destination</code>: The destination of the copied memory. <code class="prettyprint">source</code>: The source of the
copied memory. <code class="prettyprint">count</code>: The number of sequential bytes to be copied.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void* SbMemoryMove(void *destination, const void *source, size_t count)
</code></pre></div>
<h3 id="sbmemoryreallocate">SbMemoryReallocate</h3>

<p>Attempts to resize <code class="prettyprint">memory</code> to be at least <code class="prettyprint">size</code> bytes, without touching the
contents of memory.</p>

<ul>
<li><p>If the function cannot perform the fast resize, it allocates a new chunk of
memory, copies the contents over, and frees the previous chunk, returning a
pointer to the new chunk.</p></li>
<li><p>If the function cannot perform the slow resize, it returns <code class="prettyprint">NULL</code>, leaving
the given memory chunk unchanged.</p></li>
</ul>

<p>This function should be called from the client codebase. It is meant to be a
drop-in replacement for <code class="prettyprint">realloc</code>.</p>

<p><code class="prettyprint">memory</code>: The chunk of memory to be resized. <code class="prettyprint">memory</code> may be NULL, in which case
it behaves exactly like SbMemoryAllocateUnchecked. <code class="prettyprint">size</code>: The size to which
<code class="prettyprint">memory</code> will be resized. If <code class="prettyprint">size</code> is <code class="prettyprint">0</code>, the function may return <code class="prettyprint">NULL</code> or it
may return a unique pointer value that can be passed to SbMemoryDeallocate.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void* SbMemoryReallocate(void *memory, size_t size)
</code></pre></div>
<h3 id="sbmemoryreallocatechecked">SbMemoryReallocateChecked</h3>

<p>Same as SbMemoryReallocateUnchecked, but will abort() in the case of an
allocation failure.</p>

<p>DO NOT CALL. Call SbMemoryReallocate(...) instead.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void* SbMemoryReallocateChecked(void *memory, size_t size)
</code></pre></div>
<h3 id="sbmemoryreallocateunchecked">SbMemoryReallocateUnchecked</h3>

<p>This is the implementation of SbMemoryReallocate that must be provided by
Starboard ports.</p>

<p>DO NOT CALL. Call SbMemoryReallocate(...) instead.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void* SbMemoryReallocateUnchecked(void *memory, size_t size)
</code></pre></div>
<h3 id="sbmemoryset">SbMemorySet</h3>

<p>Fills <code class="prettyprint">count</code> sequential bytes starting at <code class="prettyprint">destination</code>, with the unsigned char
coercion of <code class="prettyprint">byte_value</code>. This function is meant to be a drop-in replacement for
<code class="prettyprint">memset</code>.</p>

<p>The function&#39;s behavior is undefined if <code class="prettyprint">destination</code> is NULL, and the function
is a no-op if <code class="prettyprint">count</code> is 0. The return value is <code class="prettyprint">destination</code>.</p>

<p><code class="prettyprint">destination</code>: The destination of the copied memory. <code class="prettyprint">count</code>: The number of
sequential bytes to be set.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">void* SbMemorySet(void *destination, int byte_value, size_t count)
</code></pre></div>
<h3 id="sbmemoryunmap">SbMemoryUnmap</h3>

<p>Unmap <code class="prettyprint">size_bytes</code> of physical pages starting from <code class="prettyprint">virtual_address</code>, returning
<code class="prettyprint">true</code> on success. After this function completes, [virtual_address,
virtual_address + size_bytes) will not be read/writable. This function can unmap
multiple contiguous regions that were mapped with separate calls to
SbMemoryMap(). For example, if one call to <code class="prettyprint">SbMemoryMap(0x1000)</code> returns
<code class="prettyprint">(void*)0xA000</code>, and another call to <code class="prettyprint">SbMemoryMap(0x1000)</code> returns
<code class="prettyprint">(void*)0xB000</code>, <code class="prettyprint">SbMemoryUnmap(0xA000, 0x2000)</code> should free both regions.</p>

<h4 id="declaration">Declaration</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">bool SbMemoryUnmap(void *virtual_address, int64_t size_bytes)
</code></pre></div>
        
          
            
          
        
      </div>
    </div>
  </div>

</div>


    
      <footer>
<div class="container">
    <div class="row">
      
        <div class="col-md-5 column-left">
          
          
            
              
  
    <span class="copyright-text">© Google 2019</span>
  


            
            
            
            
            
          
        </div>
      
        <div class="col-md-2 column-middle">
          
          
            
            
            
            
              
  <img class="footer-logo" src="/images/cobalt-logo.png" alt="Cobalt"/>


            
            
          
        </div>
      
<!--
          
          <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-share-button" data-href="/reference/starboard/modules/6/memory.html" data-layout=""></div>
&nbsp;
          <a href="https://twitter.com/" class="twitter-follow-button" data-show-screen-name="false" data-show-count="false" data-size=""></a>

<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>


-->
    </div>
</div>
</footer>

    

    <!-- TODO: Make sure no badness from moving common.js to styles.liquid -->

    
  </body>
</html>
